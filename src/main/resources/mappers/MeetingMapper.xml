<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sys.stm.domains.meeting.dao.MeetingRepository">

	<!-- 회의 생성 -->
	<insert id="createMeeting" parameterType="com.sys.stm.domains.meeting.domain.Meeting">
		<selectKey keyProperty="id" resultType="long" order="BEFORE">
			SELECT SEQ_MEETING.NEXTVAL FROM DUAL
		</selectKey>
		INSERT INTO "meeting"("id", "project_id", "title", "content", "member_id", "type", "progress_date", "place", "created_at", "updated_at", "is_deleted")
		VALUES (
			#{id}, #{projectId}, #{title}, #{content}, #{memberId}, #{type}, #{progressDate}, #{place}, #{createdAt}, #{updatedAt}, #{isDeleted}
		)
	</insert>

<!--	&lt;!&ndash; 회의 조회 (ID로) &ndash;&gt;-->
<!--	<select id="findById" parameterType="long" resultType="com.sys.stm.domains.meeting.domain.Meeting">-->
<!--		SELECT -->
<!--			id, -->
<!--			project_id, -->
<!--			title, -->
<!--			member_id, -->
<!--			type, -->
<!--			progress_date, -->
<!--			place, -->
<!--			participant, -->
<!--			created_at, -->
<!--			updated_at, -->
<!--			is_deleted-->
<!--		FROM meeting -->
<!--		WHERE id = #{id} AND is_deleted = 0-->
<!--	</select>-->

<!--	&lt;!&ndash; 프로젝트별 회의 목록 조회 &ndash;&gt;-->
<!--	<select id="findByProjectId" parameterType="long" resultType="com.sys.stm.domains.meeting.domain.Meeting">-->
<!--		SELECT -->
<!--			id, -->
<!--			project_id, -->
<!--			title, -->
<!--			member_id, -->
<!--			type, -->
<!--			progress_date, -->
<!--			place, -->
<!--			participant, -->
<!--			created_at, -->
<!--			updated_at, -->
<!--			is_deleted-->
<!--		FROM meeting -->
<!--		WHERE project_id = #{projectId} AND is_deleted = 0-->
<!--		ORDER BY progress_date DESC-->
<!--	</select>-->

<!--	&lt;!&ndash; 회의 수정 &ndash;&gt;-->
<!--	<update id="updateMeeting" parameterType="com.sys.stm.domains.meeting.domain.Meeting">-->
<!--		UPDATE meeting-->
<!--		SET -->
<!--			title = #{title},-->
<!--			type = #{type},-->
<!--			progress_date = #{progressDate},-->
<!--			place = #{place},-->
<!--			participant = #{participant},-->
<!--			updated_at = #{updatedAt}-->
<!--		WHERE id = #{id} AND is_deleted = 0-->
<!--	</update>-->

<!--	&lt;!&ndash; 회의 삭제 (논리 삭제) &ndash;&gt;-->
<!--	<update id="deleteMeeting" parameterType="long">-->
<!--		UPDATE meeting-->
<!--		SET -->
<!--			is_deleted = 1,-->
<!--			updated_at = CURRENT_TIMESTAMP-->
<!--		WHERE id = #{id}-->
<!--	</update>-->

<!--	&lt;!&ndash; 회의 개수 조회 &ndash;&gt;-->
<!--	<select id="countByProjectId" parameterType="long" resultType="int">-->
<!--		SELECT COUNT(*) -->
<!--		FROM meeting -->
<!--		WHERE project_id = #{projectId} AND is_deleted = 0-->
<!--	</select>-->
</mapper>


